<!DOCTYPE html><html><head><title>yes</title><style>html,body{margin:0;height:100%;overflow:hidden;font-family:sans-serif}#popup{position:fixed;top:10px;left:50%;transform:translateX(-50%);background:#fmfmfm;padding:30px;border-radius:1px;z-index:100}#closeBtn{position:absolute;top:1px;right:5px;cursor:pointer;font-weight:bold}#editor{width:100%;height:100%;font-size:16px;padding:3px}#editor:focus{outline:none}</style></head><body><div id="popup"><span id="closeBtn">âœ–</span><input id="peerIdInput" placeholder="Enter Peer ID"><button id="connectBtn">Connect</button><div id="myId">Your Peer ID :</div><div>,</div><div>you cannot join your own peer id btw</div></div><textarea id="editor"></textarea><script src="https://cdn.jsdelivr.net/npm/peerjs@1.4.7/dist/peerjs.min.js"></script><script>let e=document.getElementById("editor"),i=document.getElementById("peerIdInput"),b=document.getElementById("connectBtn"),m=document.getElementById("myId"),c=document.getElementById("closeBtn"),p=new Peer(),conn,lastValue="";p.on("open",id=>m.innerText="Your Peer ID: "+id);p.on("connection",C=>{conn=C;setup()});b.onclick=()=>{const t=i.value.trim();if(!t)return alert("Enter a Peer ID to connect");if(t===p.id)return alert("You cannot join your own Peer ID");conn=p.connect(t);setup()};c.onclick=()=>document.getElementById("popup").style.display="none";function setup(){conn.on("open",()=>{console.log("Connected!");if(e.value)conn.send(e.value)});conn.on("data",d=>{if(d!==e.value){let s=e.selectionStart;e.value=d;e.selectionStart=e.selectionEnd=s;lastValue=d}});e.addEventListener("input",()=>{let v=e.value;if(v!==lastValue){lastValue=v;conn&&conn.open&&conn.send(v)}})}</script></body></html>
